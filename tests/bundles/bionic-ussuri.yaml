local_overlay_enabled: true

series: bionic

machines:
  '0':
  '1':
  '2':
  '3':

relations:
  - ['keystone:shared-db', 'percona-cluster:shared-db']
  - ['hacluster:ha', 'keystone:ha']

applications:
  percona-cluster:
    charm: ch:percona-cluster
    num_units: 1
    to:
      - '0'
    channel: 5.7/edge

  keystone:
    charm: ch:keystone
    num_units: 3
    options:
      openstack-origin: cloud:bionic-ussuri
      token-expiration: 60
    to:
      - '1'
      - '2'
      - '3'
    channel: ussuri/edge

  hacluster:
    charm: ../../hacluster.charm
    subordinate-to:
      - keystone
