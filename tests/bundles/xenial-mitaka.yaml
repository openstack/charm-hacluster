series: xenial

machines:
  '0':
  '1':
  '2':
  '3':

relations:
  - ['keystone:shared-db', 'percona-cluster:shared-db']
  - ['hacluster:ha', 'keystone:ha']

applications:
  percona-cluster:
    charm: cs:~openstack-charmers/percona-cluster
    num_units: 1
    to:
      - '0'
    channel: candidate
  keystone:
    charm: cs:~openstack-charmers/keystone
    num_units: 3
    options:
      token-expiration: 60
    to:
      - '1'
      - '2'
      - '3'
    channel: candidate
  hacluster:
    charm: ../../../hacluster
    subordinate-to:
      - keystone
